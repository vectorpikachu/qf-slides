<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.32">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Topics in Quantitative Finance, Summer 2025 – Topics in QF</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script><script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js" type="module"></script>
<script src="site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-37eea08aefeeee20ff55810ff984fec1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-247ab3540652b161ae74986f4e2fd575.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>

<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Topics in QF</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html"> 
<span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="./NSD_Lec01-FinancialEngineering_Summer2025.html" aria-current="page"> 
<span class="menu-text">Lecture 01</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./NSD_Lec02-StochCal_Summer2025.html"> 
<span class="menu-text">Lecture 02</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./NSD_Lec03-BlackMertonScholes-1_Summer2025.html"> 
<span class="menu-text">Lecture 03</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./NSD_Lec04_Summer2025/NSD_Lec04-BlackMertonScholes-2_Summer2025.html"> 
<span class="menu-text">Lecture 04</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./NSD_Lec05_Summer2025/NSD_Lec05-Volatility_Summer2025.html"> 
<span class="menu-text">Lecture 05</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#lecture-1-financial-engineering-in-a-nutshell" id="toc-lecture-1-financial-engineering-in-a-nutshell" class="nav-link active" data-scroll-target="#lecture-1-financial-engineering-in-a-nutshell">Lecture 1: Financial engineering in a nutshell</a></li>
  <li><a href="#coordinates" id="toc-coordinates" class="nav-link" data-scroll-target="#coordinates">Coordinates</a></li>
  <li><a href="#teaching-assistants" id="toc-teaching-assistants" class="nav-link" data-scroll-target="#teaching-assistants">Teaching Assistants</a></li>
  <li><a href="#aims-of-this-course" id="toc-aims-of-this-course" class="nav-link" data-scroll-target="#aims-of-this-course">Aims of this course</a></li>
  <li><a href="#agenda" id="toc-agenda" class="nav-link" data-scroll-target="#agenda">Agenda</a></li>
  <li><a href="#online-resources" id="toc-online-resources" class="nav-link" data-scroll-target="#online-resources">Online resources</a></li>
  <li><a href="#financial-market" id="toc-financial-market" class="nav-link" data-scroll-target="#financial-market">Financial market</a></li>
  <li><a href="#financial-products" id="toc-financial-products" class="nav-link" data-scroll-target="#financial-products">Financial products</a></li>
  <li><a href="#what-is-financial-engineering" id="toc-what-is-financial-engineering" class="nav-link" data-scroll-target="#what-is-financial-engineering">What is financial engineering?</a></li>
  <li><a href="#what-is-financial-engineering-for" id="toc-what-is-financial-engineering-for" class="nav-link" data-scroll-target="#what-is-financial-engineering-for">What is financial engineering for?</a></li>
  <li><a href="#what-skills-are-required-to-be-a-financial-engineer" id="toc-what-skills-are-required-to-be-a-financial-engineer" class="nav-link" data-scroll-target="#what-skills-are-required-to-be-a-financial-engineer">What skills are required to be a financial engineer?</a></li>
  <li><a href="#quantitative-analyst---quant" id="toc-quantitative-analyst---quant" class="nav-link" data-scroll-target="#quantitative-analyst---quant">Quantitative analyst - Quant</a></li>
  <li><a href="#mathbbp-quant-v.s.-mathbbq-quant" id="toc-mathbbp-quant-v.s.-mathbbq-quant" class="nav-link" data-scroll-target="#mathbbp-quant-v.s.-mathbbq-quant"><span class="math inline">\(\mathbb{P}\)</span> quant v.s. <span class="math inline">\(\mathbb{Q}\)</span> quant</a>
  <ul class="collapse">
  <li><a href="#note" id="toc-note" class="nav-link" data-scroll-target="#note">Note</a></li>
  </ul></li>
  <li><a href="#theory-of-asset-pricing" id="toc-theory-of-asset-pricing" class="nav-link" data-scroll-target="#theory-of-asset-pricing">Theory of asset pricing</a>
  <ul class="collapse">
  <li><a href="#note-1" id="toc-note-1" class="nav-link" data-scroll-target="#note-1">Note</a></li>
  </ul></li>
  <li><a href="#law-of-one-price" id="toc-law-of-one-price" class="nav-link" data-scroll-target="#law-of-one-price">Law of one price</a></li>
  <li><a href="#monotonicity" id="toc-monotonicity" class="nav-link" data-scroll-target="#monotonicity">Monotonicity</a></li>
  <li><a href="#linearity" id="toc-linearity" class="nav-link" data-scroll-target="#linearity">Linearity</a>
  <ul class="collapse">
  <li><a href="#note-2" id="toc-note-2" class="nav-link" data-scroll-target="#note-2">Note</a></li>
  </ul></li>
  <li><a href="#principle-of-no-arbitrage" id="toc-principle-of-no-arbitrage" class="nav-link" data-scroll-target="#principle-of-no-arbitrage">Principle of no arbitrage</a>
  <ul class="collapse">
  <li><a href="#arbitrage-opportunity" id="toc-arbitrage-opportunity" class="nav-link" data-scroll-target="#arbitrage-opportunity">Arbitrage opportunity</a></li>
  </ul></li>
  <li><a href="#fundamental-theorem-of-asset-pricing" id="toc-fundamental-theorem-of-asset-pricing" class="nav-link" data-scroll-target="#fundamental-theorem-of-asset-pricing">Fundamental theorem of asset pricing</a>
  <ul class="collapse">
  <li><a href="#the-first-fundamental-theorem-of-asset-pricing" id="toc-the-first-fundamental-theorem-of-asset-pricing" class="nav-link" data-scroll-target="#the-first-fundamental-theorem-of-asset-pricing">The First Fundamental Theorem of Asset Pricing</a></li>
  <li><a href="#the-second-fundamental-theorem-of-asset-pricing" id="toc-the-second-fundamental-theorem-of-asset-pricing" class="nav-link" data-scroll-target="#the-second-fundamental-theorem-of-asset-pricing">The Second Fundamental Theorem of Asset Pricing</a></li>
  </ul></li>
  <li><a href="#decentralized-finance-defi" id="toc-decentralized-finance-defi" class="nav-link" data-scroll-target="#decentralized-finance-defi">Decentralized Finance (DeFi)</a></li>
  <li><a href="#decentralized-finance-uses" id="toc-decentralized-finance-uses" class="nav-link" data-scroll-target="#decentralized-finance-uses">Decentralized Finance Uses</a></li>
  <li><a href="#automated-market-making" id="toc-automated-market-making" class="nav-link" data-scroll-target="#automated-market-making">Automated Market Making</a></li>
  <li><a href="#amm-vs-clob" id="toc-amm-vs-clob" class="nav-link" data-scroll-target="#amm-vs-clob">AMM vs CLOB</a></li>
  <li><a href="#amm-vs-clob-1" id="toc-amm-vs-clob-1" class="nav-link" data-scroll-target="#amm-vs-clob-1">AMM vs CLOB</a></li>
  <li><a href="#brief-introduction-to-jupyter-notebook-and-python" id="toc-brief-introduction-to-jupyter-notebook-and-python" class="nav-link" data-scroll-target="#brief-introduction-to-jupyter-notebook-and-python">Brief introduction to Jupyter notebook and Python</a></li>
  <li><a href="#head-1" id="toc-head-1" class="nav-link" data-scroll-target="#head-1">Head 1</a>
  <ul class="collapse">
  <li><a href="#head-2" id="toc-head-2" class="nav-link" data-scroll-target="#head-2">Head 2</a>
  <ul class="collapse">
  <li><a href="#head-3" id="toc-head-3" class="nav-link" data-scroll-target="#head-3">Head 3</a></li>
  </ul></li>
  <li><a href="#numpy.arange-vs-numpy.linspace" id="toc-numpy.arange-vs-numpy.linspace" class="nav-link" data-scroll-target="#numpy.arange-vs-numpy.linspace"><code>numpy.arange</code> vs <code>numpy.linspace</code></a></li>
  <li><a href="#probability-distributions-in-scipy.stats" id="toc-probability-distributions-in-scipy.stats" class="nav-link" data-scroll-target="#probability-distributions-in-scipy.stats">Probability distributions in <code>scipy.stats</code></a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Topics in Quantitative Finance, Summer 2025</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="lecture-1-financial-engineering-in-a-nutshell" class="level2">
<h2 class="anchored" data-anchor-id="lecture-1-financial-engineering-in-a-nutshell">Lecture 1: Financial engineering in a nutshell</h2>
<p><br> <br></p>
<center>
<font size="5," color="darkblue"> Tai-Ho Wang (王 太和)</font>
</center>
<p><span class="math display">\[
\newcommand{\bea}{\begin{eqnarray}}
\newcommand{\eea}{\end{eqnarray}}
\newcommand{\supp}{\mathrm{supp}}
\newcommand{\F}{\mathcal{F} }
\newcommand{\cF}{\mathcal{F} }
\newcommand{\E}{\mathbb{E} }
\newcommand{\Eof}[1]{\mathbb{E}\left[ #1 \right]}
\newcommand{\Etof}[1]{\mathbb{E}_t\left[ #1 \right]}
\def\Cov{{ \mbox{Cov} }}
\def\Var{{ \mbox{Var} }}
\newcommand{\1}{\mathbf{1} }
\newcommand{\p}{\partial}
\newcommand{\PP}{\mathbb{P} }
\newcommand{\Pof}[1]{\mathbb{P}\left[ #1 \right]}
\newcommand{\QQ}{\mathbb{Q} }
\newcommand{\R}{\mathbb{R} }
\newcommand{\DD}{\mathbb{D} }
\newcommand{\HH}{\mathbb{H} }
\newcommand{\spn}{\mathrm{span} }
\newcommand{\cov}{\mathrm{cov} }
\newcommand{\HS}{\mathcal{L}_{\mathrm{HS}} }
\newcommand{\Hess}{\mathrm{Hess} }
\newcommand{\trace}{\mathrm{trace} }
\newcommand{\LL}{\mathcal{L} }
\newcommand{\s}{\mathcal{S} }
\newcommand{\ee}{\mathcal{E} }
\newcommand{\ff}{\mathcal{F} }
\newcommand{\hh}{\mathcal{H} }
\newcommand{\bb}{\mathcal{B} }
\newcommand{\dd}{\mathcal{D} }
\newcommand{\g}{\mathcal{G} }
\newcommand{\half}{\frac{1}{2} }
\newcommand{\T}{\mathcal{T} }
\newcommand{\bit}{\begin{itemize}}
\newcommand{\eit}{\end{itemize}}
\newcommand{\beq}{\begin{equation}}
\newcommand{\eeq}{\end{equation}}
\newcommand{\tr}{\mbox{tr}}
\]</span></p>
</section>
<section id="coordinates" class="level2">
<h2 class="anchored" data-anchor-id="coordinates">Coordinates</h2>
<ul>
<li>Email: tai-ho.wang@baruch.cuny.edu</li>
<li>Webpage: <a href="https://mfe.baruch.cuny.edu/tai-ho.wang">mfe.baruch.cuny.edu/tai-ho.wang</a></li>
</ul>
</section>
<section id="teaching-assistants" class="level2">
<h2 class="anchored" data-anchor-id="teaching-assistants">Teaching Assistants</h2>
<p><font size="3.5," color="darkblue">丁宏骏</font></p>
<ul>
<li>北大计算机本科毕</li>
<li>Baruch MFE 2025 incoming student</li>
<li>Email: dinghongjun@stu.pku.edu.cn</li>
</ul>
<p><font size="3.5," color="darkblue">李新宇</font></p>
<ul>
<li>北大数院直博</li>
<li>Email: xinyu911@stu.pku.edu.cn</li>
</ul>
</section>
<section id="aims-of-this-course" class="level2">
<h2 class="anchored" data-anchor-id="aims-of-this-course">Aims of this course</h2>
<ul>
<li>To be familiar with the financial products and the modeling of their prices</li>
<li>To be familiar with well-known pricing models.</li>
<li>To be familiar with the principle of no arbitrage and its applications</li>
<li>To gain exposure to automated market making in decentralized exchange</li>
<li>To grasp theories of probability and statistics underpinning the models</li>
<li>To gain experiences in working with Jupyter notebook and programming in <code>python</code></li>
</ul>
</section>
<section id="agenda" class="level2">
<h2 class="anchored" data-anchor-id="agenda">Agenda</h2>
<ul>
<li>Financial market and financial product</li>
<li>What is financial engineering?</li>
<li><span class="math inline">\(\mathbb{P}\)</span> quant v.s. <span class="math inline">\(\mathbb{Q}\)</span> quant</li>
<li>Theory of pricing
<ul>
<li>Law of one price</li>
<li>Monotonicity</li>
<li>Linearity</li>
</ul></li>
<li>Principle of no arbitrage</li>
<li>Decentralized finance (DeFi) and automated market making (AMM)</li>
<li>Brief introduction to Jupyter notebook and programming in <code>python</code></li>
</ul>
</section>
<section id="online-resources" class="level2">
<h2 class="anchored" data-anchor-id="online-resources">Online resources</h2>
<ul>
<li><a href="https://www.investopedia.com/">Investopedia</a></li>
<li><a href="https://www.wikipedia.org/">Wikipedia</a></li>
<li><a href="https://www.arpm.co/">Advanced Risk and Portfolio Management</a></li>
</ul>
<br> <br>
<center>
<font color="blue" size="5">Financial Markets and Financial Productions</font>
</center>
<p><br> <br></p>
</section>
<section id="financial-market" class="level2">
<h2 class="anchored" data-anchor-id="financial-market">Financial market</h2>
<p>Quotes from <a href="https://www.investopedia.com">Investopedia</a>:</p>
<blockquote class="blockquote">
<p><em>A financial market is a broad term describing any marketplace where buyers and sellers participate in the trade of assets such as equities, bonds, currencies and derivatives. Financial markets are typically defined by having transparent pricing, basic regulations on trading, costs and fees, and market forces determining the prices of securities that trade.</em></p>
</blockquote>
<p>注:</p>
<ul>
<li>equities: 股票</li>
<li>bonds: 债券</li>
<li>currencies: 货币</li>
<li>derivatives: 衍生品</li>
</ul>
<p>Types of financial markets and their roles</p>
<ul>
<li>Captial market
<ul>
<li>bond market</li>
<li>equity market</li>
</ul></li>
<li>Derivative market</li>
<li>ForEx (foreign exchange) and interbank market</li>
<li>Primary vs secondary market
<ul>
<li>A primary market issues new securities on an exchange.</li>
<li>The secondary market is where investors purchase securities or assets from other investors, rather than from issuing companies themselves.</li>
</ul></li>
<li>OTC (over-the-counter) market</li>
<li>Third and fourth market</li>
<li>Decentralized Exchanges (DeExs)</li>
</ul>
<p>For more details, visit <a href="https://www.investopedia.com/walkthrough/corporate-finance/1/financial-markets.aspx">Types of Financial Markets and their roles</a> at <a href="https://www.investopedia.com">Investopedia</a>.</p>
<p>注:</p>
<ul>
<li><p>一级市场, 又称发行市场, 初级市场 (Primary Market) 是处理新发行证券的金融市场, 筹集资金的公司, 政府或公共部门通过发行新的股票和债券来进行融资.</p></li>
<li><p>二级市场 (Secondary Market) 是买卖已经上市公司股票的资本市场. 二级市场可为金融商品的最初投资者提供资金的流动性. 一级市场和二级市场通过证券交易所进行联系.</p></li>
<li><p>股票交易属于场内交易, 也就是交易所交易, 因为所有交易是发生在固定的证券交易所, 有固定的交易时间和合约标准.</p>
<p>然而, 还有另一个系统, 这就是场外交易市场, 它的交易是由“经纪商” (称为做市商) 促成的, 他们提供金融产品的买卖价格, 有效地确定资产的价格. 现在已经基本上不存在了.</p></li>
<li><p>第三市场是指原来在证交所上市的股票移到以场外进行交易而形成的市场.</p></li>
<li><p>第四市场指许多机构大投资者, 进行上市股票和其他证券的交易, 完全撇开经纪商和交易所, 直接与对方联系, 采用这种方式进行证券交易, 形成了第四市场.</p></li>
</ul>
<p>We will only cover the equity market and the liquidity pools in DeExs.</p>
</section>
<section id="financial-products" class="level2">
<h2 class="anchored" data-anchor-id="financial-products">Financial products</h2>
<ul>
<li>Primary or underlying
<ul>
<li>Equity</li>
<li>Fixed income</li>
<li>Commodity</li>
<li>Credit</li>
<li>Cryptocurrency or token</li>
</ul></li>
<li>Secondary or derivatives
<ul>
<li>Forward (远期合约) and futures (期货)</li>
<li>Options (期权)</li>
<li>Swaps (互换合约)</li>
</ul></li>
</ul>
<p>注:</p>
<ul>
<li><p>远期合约: 约定在未来某一特定日期以今天商定的价格买入或卖出某种资产.</p></li>
<li><p>期货: 约定在未来某一特定日期以今天商定的价格买入或卖出某种资产, 但与远期合约不同的是, 期货合约是标准化的, 在交易所交易.</p></li>
<li><p>期权给予持有者权利而非义务, 在未来某个时间以预先确定的价格购买 (看涨期权, Call Option) 或出售 (看跌期权, Put Option) 一定数量的资产.</p>
<p>期权持有人支付一笔期权费 (Premium) 给期权卖方, 以换取这种选择权.</p>
<p>如果市场价格不利于期权持有人, 则可以选择不行使期权, 最大损失为已支付的期权费.</p></li>
<li><p>互换是一种协议, 其中两方同意在未来的一段时间内交换一系列现金流.</p></li>
</ul>
<br> <br>
<center>
<font color="blue" size="5">Financial Engineering and Quantitative Finance</font>
</center>
<p><br> <br></p>
</section>
<section id="what-is-financial-engineering" class="level2">
<h2 class="anchored" data-anchor-id="what-is-financial-engineering">What is financial engineering?</h2>
<p>According to <a href="https://www.iaqf.org/financial-engineering">this article</a> in the website of International Association for Quantitative Finance (IAQF) (used to be named as IAFE), financial engineering is</p>
<ul>
<li>the application of mathematical methods to the solution of problems in finance</li>
<li>also known as financial mathematics, mathematical finance, and computational finance</li>
</ul>
<p>Therefore,</p>
<ul>
<li>Financial engineering draws on tools from applied mathematics, computer science, statistics, and economic theory.</li>
<li>Investment banks, commercial banks, hedge funds, insurance companies, corporate treasuries, and regulatory agencies employ financial engineers.</li>
<li>These businesses apply the methods of financial engineering to problems such as new product development, derivative securities valuation, portfolio structuring, risk management, and scenario simulation.</li>
</ul>
</section>
<section id="what-is-financial-engineering-for" class="level2">
<h2 class="anchored" data-anchor-id="what-is-financial-engineering-for">What is financial engineering for?</h2>
<ul>
<li>Derivative pricing</li>
<li>Portfolio construction</li>
<li>Risk management</li>
<li>Quantitative trading</li>
<li>Market making and liquidity provision</li>
<li>Order implementation</li>
</ul>
<p>We shall mostly focus on the pricing of derivatives based on the principle of no arbitrage.</p>
<p>As pricing is concerned, in financial engineering we usually consider the following types of problems:</p>
<ul>
<li>direct problem: under a given model for the underlying, calculate the prices of its derivatives</li>
<li>inverse problem: for a given set of prices of liquidly derivatives, determine the parameters or even a model that generates the observed market prices.</li>
</ul>
</section>
<section id="what-skills-are-required-to-be-a-financial-engineer" class="level2">
<h2 class="anchored" data-anchor-id="what-skills-are-required-to-be-a-financial-engineer">What skills are required to be a financial engineer?</h2>
<p>Quantitative finance is an interdisciplinary field, it requires hard skills in</p>
<ul>
<li>Math: calculus, linear algebra, probability, stochastic process, differential equation, optimization, etc</li>
<li>Finance: derivative pricing theory, modern portfolio theory, market microstructure models</li>
<li>Statistics: regression and classification, factor analysis, time series analysis</li>
<li>Programming: R, Python, C++, Matlab, etc</li>
</ul>
<p>Nowadays also requires</p>
<ul>
<li>machine learning techniques</li>
<li>sentiment analysis</li>
</ul>
</section>
<section id="quantitative-analyst---quant" class="level2">
<h2 class="anchored" data-anchor-id="quantitative-analyst---quant">Quantitative analyst - Quant</h2>
<p>Excerpt from <a href="https://www.investopedia.com/articles/financialcareers/08/quants-quantitative-analyst.asp">Quants: The Rocket Scientists of Wall Street</a> in Investopedia,</p>
<blockquote class="blockquote">
<p>As financial securities become increasingly complex, demand has grown steadily for people who not only understand the complex mathematical models that price these securities, but who are able to enhance them to generate profits and reduce risk. These individuals are known as quantitative analysts, or simply “quants.”</p>
</blockquote>
<p>Quantitative analysts</p>
<ul>
<li>design and implement complex models that allow financial firms to price and trade securities</li>
<li>front desk quants work directly with traders, providing them with pricing or trading tools</li>
<li>back office quants validate the models, conduct research and create new strategies</li>
<li>positions are found almost exclusively in major financial centers with trading operations</li>
</ul>
</section>
<section id="mathbbp-quant-v.s.-mathbbq-quant" class="level2">
<h2 class="anchored" data-anchor-id="mathbbp-quant-v.s.-mathbbq-quant"><span class="math inline">\(\mathbb{P}\)</span> quant v.s. <span class="math inline">\(\mathbb{Q}\)</span> quant</h2>
<p>Quants are briefly categorized as <span class="math inline">\(\mathbb{P}\)</span> quants and <span class="math inline">\(\mathbb{Q}\)</span> quants.</p>
<ul>
<li><span class="math inline">\(\mathbb{P}\)</span> refers to the physical measure under which the financial assets presumably evolves.</li>
<li><span class="math inline">\(\mathbb{Q}\)</span> refers to the risk neutral measure for pricing under the principle of no arbitrage.</li>
</ul>
<p>The mentality behind <span class="math inline">\(\mathbb P\)</span> quant and the buy side is</p>
<ul>
<li>Regard the market as a whole, process historical data then forecast price movements</li>
<li>Construct portfolio or investment strategy based on performance measures</li>
<li>Decide the horizon of holding the portfolio</li>
<li>Risk management</li>
</ul>
<p>The mentality behind <span class="math inline">\(\mathbb Q\)</span> quant and the sell side is</p>
<ul>
<li>Construct model that could possibly explain the market</li>
<li>Calibrate parameters of model to market data</li>
<li>Apply the calibrated model to price new derivatives</li>
<li>Hedging</li>
</ul>
<section id="note" class="level3">
<h3 class="anchored" data-anchor-id="note">Note</h3>
<ul>
<li><p>In this course, we shall cover topics on both sides, though not evenly.</p></li>
<li><p>Please refer to <a href="https://www.arpm.co/lab/about-quantitative-finance.html#x4-130001">this link</a> in <a href="https://www.arpm.co/">ARPM.co</a> for more details on the interplay between <span class="math inline">\(\mathbb P\)</span> quants and <span class="math inline">\(\mathbb Q\)</span> quants.</p></li>
<li><p><span class="math inline">\(\PP\)</span> quant (Physical Probability Measure Quantitative Analyst, 物理测度下的量化分析) 关注的是资产在现实世界概率测度 (记作 <span class="math inline">\(\PP\)</span>) 下的行为, 他们试图理解和预测市场的真实运动. 在买方 (buy side), 预测真实市场的价格走势、风险评估等.</p>
<p>E.g., Alibaba 的股票在涨, 你没有预测到, 却卖出了它.</p></li>
<li><p><span class="math inline">\(\QQ\)</span> quant (Risk-Neutral Probability Measure Quantitative Analyst, 风险中性测度下的量化分析) 关注的是在风险中性测度 (记作 <span class="math inline">\(\QQ\)</span>) 下的资产价格行为. 在这个虚拟的概率空间下, 所有资产的期望收益率等于无风险利率.</p>
<p>在卖方 (sell side), 正确定价衍生品、避免套利.</p></li>
</ul>
</section>
</section>
<section id="theory-of-asset-pricing" class="level2">
<h2 class="anchored" data-anchor-id="theory-of-asset-pricing">Theory of asset pricing</h2>
<p>Heuristically, pricing is a rule or a map that assigns a (unique, current) value to each (random) payoff/cashflow which can only be realized at the future investment horizon. The collection/universe of all the payoffs at the investment horizon is assumed to be equipped with a vector space structure. In other words, we would be able to add or subtract a payoff from another, and also be able to scale up or down by any (real, positive or negative) scalar. Thus, we can regard pricing as a function or a functional <span class="math inline">\(\Pi\)</span> from the space of (random) payoffs to real numbers:</p>
<p><span class="math display">\[
\Pi : \mathcal P \to \R,
\]</span></p>
<p>where <span class="math inline">\(\mathcal P\)</span> is space of payoffs at investment horizon.</p>
<p>A pricing functional <span class="math inline">\(\Pi\)</span> presumably bears the following axioms</p>
<ul>
<li>Law of one price</li>
<li>Monotonicity</li>
<li>Linearity</li>
</ul>
<p>By essentially the Riesz representation theorem, a pricing function/functional, should it exist, can be characterized by the expectation of a (random) payoff weighted by a stochastic discount factor.</p>
<p>The price of any asset in the universe is given by the an expectation of discounted payoff discounted by a stochastic discount factor.</p>
<section id="note-1" class="level3">
<h3 class="anchored" data-anchor-id="note-1">Note</h3>
<p>In this course we shall explore the modeling of the pricing functional.</p>
</section>
</section>
<section id="law-of-one-price" class="level2">
<h2 class="anchored" data-anchor-id="law-of-one-price">Law of one price</h2>
<p>Two payoffs with equal values in all scenarios must have the same price.</p>
</section>
<section id="monotonicity" class="level2">
<h2 class="anchored" data-anchor-id="monotonicity">Monotonicity</h2>
<p>If the payoff <span class="math inline">\(X\)</span> dominates the payoff <span class="math inline">\(Y\)</span>, i.e., <span class="math inline">\(X &gt; Y\)</span> in any scenario, then the price of <span class="math inline">\(X\)</span> must be higher than that of <span class="math inline">\(Y\)</span>.</p>
</section>
<section id="linearity" class="level2">
<h2 class="anchored" data-anchor-id="linearity">Linearity</h2>
<p>The price of linear combination of the payoffs <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span> is the same linear combination of the price of <span class="math inline">\(X\)</span> and <span class="math inline">\(Y\)</span>. That is,</p>
<p><span class="math display">\[
\Pi(\alpha X + \beta Y) = \alpha \Pi(X) + \beta \Pi(Y)
\]</span></p>
<p>If the pricing function/functional satisfies the axioms, it can be represented as a discounted expectation. Precisely, for a given payoff <span class="math inline">\(X\)</span>, its price is given by</p>
<p><span class="math display">\[
\Pi(X) = \Eof{D X}
\]</span></p>
<p>where <span class="math inline">\(D\)</span> is a (positive) random variable called <em>stochastic discount factor</em>.</p>
<section id="note-2" class="level3">
<h3 class="anchored" data-anchor-id="note-2">Note</h3>
<p>The <span class="math inline">\(\Eof{D}\)</span> is the price of zero coupon bond since, the payoff of zero coupon bond of face value 1 is <span class="math inline">\(X \equiv 1\)</span>.</p>
</section>
</section>
<section id="principle-of-no-arbitrage" class="level2">
<h2 class="anchored" data-anchor-id="principle-of-no-arbitrage">Principle of no arbitrage</h2>
<section id="arbitrage-opportunity" class="level3">
<h3 class="anchored" data-anchor-id="arbitrage-opportunity">Arbitrage opportunity</h3>
<p>Intuitively, an <em>arbitrage opportunity</em> is a trade or a trading strategy that have positive payoff at the investment horizon with zero cost currently. In other words, we are able to acquire a financial position, be statically or dynamically, without being required to pay initially for entering the position.</p>
<p>Any viable financial model should not permit arbitrage opportunity.</p>
<p>In reality, arbitrage opportunity does exist. However, it disappears very quickly even much quicker now due to the advent of technology, since once it is exploited, sophisticated market participants will quickly take the advantage of it, then the market reacts to it so as to reach a new status without arbitrage opportunity.</p>
<p>Principle of no arbitrage is the core behind the theory of derivative pricing.</p>
</section>
</section>
<section id="fundamental-theorem-of-asset-pricing" class="level2">
<h2 class="anchored" data-anchor-id="fundamental-theorem-of-asset-pricing">Fundamental theorem of asset pricing</h2>
<p>Explanations from <a href="https://en.wikipedia.org/wiki/Fundamental_theorem_of_asset_pricing">Wikipedia</a>.</p>
<blockquote class="blockquote">
<p><em>The fundamental theorems of asset pricing (also: of arbitrage, of finance) provide necessary and sufficient conditions for a market to be arbitrage free and for a market to be complete.</em></p>
</blockquote>
<p>To be more specific,</p>
<p><em>In a discrete (i.e.&nbsp;finite state) market, the following hold:</em></p>
<section id="the-first-fundamental-theorem-of-asset-pricing" class="level3">
<h3 class="anchored" data-anchor-id="the-first-fundamental-theorem-of-asset-pricing">The First Fundamental Theorem of Asset Pricing</h3>
<p>A discrete market, on a discrete probability space <span class="math inline">\((\Omega, \cF, \PP)\)</span>, is arbitrage-free if and only if there exists at least one risk neutral probability measure that is equivalent to the original probability measure, <span class="math inline">\(\PP\)</span>.</p>
</section>
<section id="the-second-fundamental-theorem-of-asset-pricing" class="level3">
<h3 class="anchored" data-anchor-id="the-second-fundamental-theorem-of-asset-pricing">The Second Fundamental Theorem of Asset Pricing</h3>
<p>An arbitrage-free market <span class="math inline">\((S, B)\)</span> consisting of a collection of stocks <span class="math inline">\(S\)</span> and a risk-free bond <span class="math inline">\(B\)</span> is complete if and only if there exists a unique risk-neutral measure that is equivalent to <span class="math inline">\(\PP\)</span> and has numeraire <span class="math inline">\(B\)</span>.</p>
<br> <br>
<center>
<font color="blue" size="5">Decentralized Finance and Automated Market Making</font>
</center>
<p><br> <br></p>
</section>
</section>
<section id="decentralized-finance-defi" class="level2">
<h2 class="anchored" data-anchor-id="decentralized-finance-defi">Decentralized Finance (DeFi)</h2>
<p>Quotes from the <a href="https://www.investopedia.com/decentralized-finance-defi-5113835">Investopeida page</a>:</p>
<blockquote class="blockquote">
<ul>
<li><h4 id="what-is-defi" class="anchored">What is DeFi ?</h4>
<ul>
<li>an emerging peer-to-peer financial system that uses blockchain and cryptocurrencies to allow people, businesses, or other entities to transact directly with each other.</li>
<li>The key principle behind DeFi is to remove third parties like banks from the financial system, thereby reducing costs and transaction times.</li>
<li>In the U.S., the Federal Reserve and Securities and Exchange Commission (SEC) define the rules for centralized financial institutions like banks and brokerages, which consumers rely on to access capital and financial services directly.</li>
<li>DeFi challenges this centralized financial system by empowering individuals with peer-to-peer transactions.</li>
</ul></li>
<li><h4 id="how-does-defi-work" class="anchored">How does DeFi work?</h4>
<ul>
<li>Through peer-to-peer financial networks, DeFi uses security protocols, connectivity, software, and hardware advancements.</li>
<li>This system eliminates intermediaries like banks and other financial service companies. These companies charge businesses and customers for using their services, which are necessary in the current system because it’s the only way to make it work.</li>
<li>DeFi uses blockchain technology to reduce the need for these intermediaries.</li>
</ul></li>
</ul>
</blockquote>
</section>
<section id="decentralized-finance-uses" class="level2">
<h2 class="anchored" data-anchor-id="decentralized-finance-uses">Decentralized Finance Uses</h2>
<p>Quotes from the same <a href="https://www.investopedia.com/decentralized-finance-defi-5113835">Investopeida page</a>:</p>
<blockquote class="blockquote">
<p>Decentralized finance, originally conceived of as a way to bring financial services like loans and banking to those who don’t have access to them, has morphed into an industry where you can take part in many different sectors or endeavors. Here are a few of the most popular:</p>
<ul>
<li>Decentralized exchanges: The top preference for defi app users is accessing decentralized exchanges. Exchanges like Uniswap and PancakeSwap have apps that let you interact with other cryptocurrency users.</li>
<li>Liquidity providers: Liquidity is the ability to sell assets quickly, a problem many cryptocurrency users have encountered. Liquidity providers are generally pools where users place funds <font color="blue">(coins or tokens)</font> so exchanges can provide selling <font color="blue">(trading)</font> opportunities for their users.</li>
<li>Lending/Yield Farming: There are hundreds of defi apps available that provide lending. Generally, they operate the same way as a liquidity pool, where users lock their funds in a pool and let others borrow them, receiving interest on their loans—called yield farming. Many provide flash loans, where no collateral is required from the borrower.</li>
<li>Gambling/Prediction Markets: Everyday, millions of dollars in cryptocurrency are used in DeFi gambling and prediction apps like Polymarket, ZKasino, Horse Racing Slot Keno Roulett, Azuro, and JuicyBet. Prediction markets are platforms that let you place bets on the outcome of nearly any event.</li>
<li>NFTs: The market for non-fungible tokens has cooled somewhat, but they are still popular with niche investors and collectors.</li>
</ul>
</blockquote>
</section>
<section id="automated-market-making" class="level2">
<h2 class="anchored" data-anchor-id="automated-market-making">Automated Market Making</h2>
<section id="automatic-market-makers-amms-are" class="level4">
<h4 class="anchored" data-anchor-id="automatic-market-makers-amms-are">Automatic Market Makers (AMMs) are</h4>
<ul>
<li>Algorithms that power decentralized exchanges (DEXs).</li>
<li>Replace traditional order books with liquidity pools.</li>
<li>Use mathematical formulas to determine asset prices.</li>
</ul>
</section>
<section id="how-amms-work" class="level4">
<h4 class="anchored" data-anchor-id="how-amms-work">How AMMs Work</h4>
<ul>
<li>Users provide liquidity (crypto assets) to pools.</li>
<li>Traders swap directly with the pool’s assets.</li>
<li>Prices are determined by the ratio of assets within the pool.</li>
<li>Key Benefits
<ul>
<li>Permissionless: Anyone can trade or provide liquidity.</li>
<li>Automated: No middlemen or order books needed.</li>
<li>Always Available: 24/7 trading, regardless of market conditions.</li>
</ul></li>
</ul>
</section>
</section>
<section id="amm-vs-clob" class="level2">
<h2 class="anchored" data-anchor-id="amm-vs-clob">AMM vs CLOB</h2>
<ul>
<li><strong>Automated market making</strong> are innovative solutions to the problems of decentralized exchanges. In the years prior to the implementation of AMMs, developers implemented <strong>Decentralized Exchanges</strong> (DEXs) by replicating traditional central limit order books (CLOB) used by centralized exchanges.</li>
<li>The result was excessive network transaction fees and high latency due to the difficulty in managing and maintaining a huge amount of transactions on the chain. Fortunately, the implementation of AMMs solved the problems of excessive fees and low liquidity.</li>
</ul>
</section>
<section id="amm-vs-clob-1" class="level2">
<h2 class="anchored" data-anchor-id="amm-vs-clob-1">AMM vs CLOB</h2>
<p>Compared to CLOBs, AMMs offer some advantages. - Efficient computation. They have minimal storage needs, and matching computations can be done quickly, typically via constant-time closed-from algebraic computations. - In a CLOB, on the other hand, matching engine calculations may involve complex data structures and computations that scale with the number of orders. Thus AMMs are uniquely suited to the severely computation- and storage-constrained environment of the blockchain.</p>
<ul>
<li>CLOBs are not well-suited to a long-tail of illiquid assets. This is because they require the participation of active market markers. In contrast, AMMs mainly rely on passive liquidity providers (LPs).</li>
</ul>
<br> <br>
<center>
<font color="blue" size="5">Brief Introduction to Jupyter and Python</font>
</center>
<p><br> <br></p>
</section>
<section id="brief-introduction-to-jupyter-notebook-and-python" class="level2">
<h2 class="anchored" data-anchor-id="brief-introduction-to-jupyter-notebook-and-python">Brief introduction to Jupyter notebook and Python</h2>
<p>Online resources</p>
<ul>
<li><a href="https://jupyter.org/">Jupyter notebook and Jupyter lab</a></li>
<li><a href="https://docs.python.org/3/">Python documentation</a></li>
<li><a href="https://numpy.org/">Numpy</a></li>
<li><a href="https://scipy.org/">Scipy</a></li>
<li><a href="https://pandas.pydata.org/">Pandas</a></li>
</ul>
<div id="cell-28" class="cell" data-execution_count="1">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="dv">78</span><span class="op">+</span><span class="dv">12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="1">
<pre><code>90</code></pre>
</div>
</div>
<p>For example, this is a markdown cell.<br>
Let’s have some fun.</p>
<p>welcome to beijing</p>
<div id="cell-30" class="cell" data-execution_count="2">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="dv">78</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="2">
<pre><code>78</code></pre>
</div>
</div>
<div id="cell-31" class="cell" data-execution_count="3">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># And this is a code cell</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="head-1" class="level1">
<h1>Head 1</h1>
<section id="head-2" class="level2">
<h2 class="anchored" data-anchor-id="head-2">Head 2</h2>
<section id="head-3" class="level3">
<h3 class="anchored" data-anchor-id="head-3">Head 3</h3>
<section id="head-4" class="level4">
<h4 class="anchored" data-anchor-id="head-4">Head 4</h4>
<p>LaTex we can try to type <span class="math inline">\(\log x \times \cos y\)</span></p>
<p>Test on integral</p>
<p><span class="math display">\[ \int_{-\infty}^\infty e^{-\frac{x^2}2} {\rm d}x = \sqrt{2\pi}.\]</span></p>
<p>This is an example for sum of an infinite series, the Riemann zeta function.</p>
<p><span class="math display">\[
\zeta(2) = \sum_{n=1}^\infty \frac1{n^2} = 1 + \frac1{2^2} + \frac1{3^2} + \cdots + \frac1{n^2} + \cdots = \frac{\pi^2}6
\]</span></p>
<div id="cell-34" class="cell" data-execution_count="5">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-35" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install modules if necessary</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"># pip install pandas</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"># pip install seaborn</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-36" class="cell" data-execution_count="6">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>np.exp(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="6">
<pre><code>np.float64(2.718281828459045)</code></pre>
</div>
</div>
<div id="cell-37" class="cell" data-execution_count="7">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-38" class="cell" data-execution_count="8">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>np.exp(<span class="dv">1</span>), np.log(np.exp(<span class="dv">1</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="8">
<pre><code>(np.float64(2.718281828459045), np.float64(1.0))</code></pre>
</div>
</div>
<div id="cell-39" class="cell" data-execution_count="9">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> exp</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-40" class="cell" data-execution_count="10">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>exp(<span class="dv">1</span>), np.exp(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="10">
<pre><code>(np.float64(2.718281828459045), np.float64(2.718281828459045))</code></pre>
</div>
</div>
<div id="cell-41" class="cell" data-execution_count="11">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># import modules that will be commonly used in the course</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> numpy <span class="im">import</span> exp, log, sqrt</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> scipy.stats <span class="im">import</span> norm, t</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> scipy.stats <span class="im">as</span> ss</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-42" class="cell" data-execution_count="12">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>exp(<span class="dv">0</span>), np.exp(<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="12">
<pre><code>(np.float64(1.0), np.float64(1.0))</code></pre>
</div>
</div>
<div id="cell-43" class="cell" data-execution_count="13">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>x<span class="op">=</span><span class="dv">6</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="13">
<pre><code>6</code></pre>
</div>
</div>
<div id="cell-44" class="cell" data-execution_count="14">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># list</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>tickers <span class="op">=</span> [<span class="st">'aapl'</span>, <span class="st">'goog'</span>, <span class="st">'spx'</span>]</span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># tuple</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>prices <span class="op">=</span> (<span class="dv">140</span>, <span class="dv">600</span>, <span class="dv">4500</span>)</span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># dict/dictionary</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>stocks <span class="op">=</span> {<span class="st">'ticker'</span>: tickers, <span class="st">'price'</span>: prices}</span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>stocks</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="14">
<pre><code>{'ticker': ['aapl', 'goog', 'spx'], 'price': (140, 600, 4500)}</code></pre>
</div>
</div>
<div id="cell-45" class="cell" data-execution_count="15">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>stocks[<span class="st">'ticker'</span>], stocks[<span class="st">'price'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="15">
<pre><code>(['aapl', 'goog', 'spx'], (140, 600, 4500))</code></pre>
</div>
</div>
<div id="cell-46" class="cell" data-execution_count="16">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co"># present data as a pandas.DataFrame</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>df <span class="op">=</span> pd.DataFrame({<span class="st">'ticker'</span>: tickers, <span class="st">'price'</span>: prices})</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="16">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ticker</th>
<th data-quarto-table-cell-role="th">price</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>aapl</td>
<td>140</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>goog</td>
<td>600</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>spx</td>
<td>4500</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-47" class="cell" data-execution_count="17">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="co"># add a column to pandas.DataFrame</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>df[<span class="st">'index'</span>] <span class="op">=</span> (<span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">9</span>)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="17">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">ticker</th>
<th data-quarto-table-cell-role="th">price</th>
<th data-quarto-table-cell-role="th">index</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>aapl</td>
<td>140</td>
<td>6</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>goog</td>
<td>600</td>
<td>8</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>spx</td>
<td>4500</td>
<td>9</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-48" class="cell" data-execution_count="18">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># concatenate lists</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>taiho <span class="op">=</span> [<span class="dv">3</span>, <span class="dv">2</span>, <span class="st">'this is a string'</span>]</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(taiho)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>taiho <span class="op">+=</span> [<span class="dv">90</span>]</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(taiho)</span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>([<span class="st">'bye'</span>] <span class="op">+</span> taiho <span class="op">+</span> [<span class="st">'hello'</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[3, 2, 'this is a string']
[3, 2, 'this is a string', 90]
['bye', 3, 2, 'this is a string', 90, 'hello']</code></pre>
</div>
</div>
<div id="cell-49" class="cell" data-execution_count="19">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>np.identity(<span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="19">
<pre><code>array([[1., 0., 0.],
       [0., 1., 0.],
       [0., 0., 1.]])</code></pre>
</div>
</div>
<div id="cell-50" class="cell" data-execution_count="20">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="co"># matrix mulplications</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> np.identity(<span class="dv">4</span>)</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a><span class="co">#A</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(A)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="dv">2</span><span class="op">*</span>A) </span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="op">*</span>A <span class="op">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[1. 0. 0. 0.]
 [0. 1. 0. 0.]
 [0. 0. 1. 0.]
 [0. 0. 0. 1.]]
[[2. 0. 0. 0.]
 [0. 2. 0. 0.]
 [0. 0. 2. 0.]
 [0. 0. 0. 2.]]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="20">
<pre><code>array([[3., 1., 1., 1.],
       [1., 3., 1., 1.],
       [1., 1., 3., 1.],
       [1., 1., 1., 3.]])</code></pre>
</div>
</div>
<div id="cell-51" class="cell" data-execution_count="21">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> [<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span>]</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> [<span class="dv">4</span>, <span class="dv">5</span>, <span class="dv">6</span>]</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(B <span class="op">+</span> c)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>np.array(B) <span class="op">+</span> np.array(c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1, 2, 3, 4, 5, 6]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="21">
<pre><code>array([5, 7, 9])</code></pre>
</div>
</div>
<div id="cell-52" class="cell" data-execution_count="22">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="kw">lambda</span> x: <span class="dv">2</span><span class="op">*</span>x<span class="op">**</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>[f(i) <span class="cf">for</span> i <span class="kw">in</span> <span class="bu">range</span>(<span class="dv">9</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="22">
<pre><code>[1, 3, 9, 19, 33, 51, 73, 99, 129]</code></pre>
</div>
</div>
<div id="cell-53" class="cell" data-execution_count="23">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>f(np.arange(<span class="dv">9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="23">
<pre><code>array([  1,   3,   9,  19,  33,  51,  73,  99, 129])</code></pre>
</div>
</div>
<div id="cell-54" class="cell" data-execution_count="24">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="24">
<pre><code>array([0.        , 0.11111111, 0.22222222, 0.33333333, 0.44444444,
       0.55555556, 0.66666667, 0.77777778, 0.88888889, 1.        ])</code></pre>
</div>
</div>
<div id="cell-55" class="cell" data-execution_count="25">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>np.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="25">
<pre><code>array([0. , 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9])</code></pre>
</div>
</div>
<div id="cell-56" class="cell" data-execution_count="26">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> np.arange(<span class="dv">16</span>)</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(B)</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>B <span class="op">=</span> np.arange(<span class="dv">16</span>).reshape(<span class="dv">4</span>, <span class="dv">4</span>)</span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[ 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="26">
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15]])</code></pre>
</div>
</div>
<div id="cell-57" class="cell" data-execution_count="27">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>A, B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="27">
<pre><code>(array([[1., 0., 0., 0.],
        [0., 1., 0., 0.],
        [0., 0., 1., 0.],
        [0., 0., 0., 1.]]),
 array([[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11],
        [12, 13, 14, 15]]))</code></pre>
</div>
</div>
<div id="cell-58" class="cell" data-execution_count="28">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> np.array([<span class="dv">3</span>, <span class="dv">1</span>, <span class="dv">4</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-59" class="cell" data-execution_count="29">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a>A, d</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="29">
<pre><code>(array([[1., 0., 0., 0.],
        [0., 1., 0., 0.],
        [0., 0., 1., 0.],
        [0., 0., 0., 1.]]),
 array([3, 1, 4]))</code></pre>
</div>
</div>
<div id="cell-60" class="cell" data-execution_count="30">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>A<span class="op">*</span>d</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<div class="ansi-escaped-output">
<pre><span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">ValueError</span>                                Traceback (most recent call last)
<span class="ansi-cyan-fg">Cell</span><span class="ansi-cyan-fg"> </span><span class="ansi-green-fg">In[30]</span><span class="ansi-green-fg">, line 1</span>
<span class="ansi-green-fg">----&gt; </span><span class="ansi-green-fg">1</span> <span class="ansi-yellow-bg">A</span><span class="ansi-yellow-bg">*</span><span class="ansi-yellow-bg">d</span>

<span class="ansi-red-fg">ValueError</span>: operands could not be broadcast together with shapes (4,4) (3,) </pre>
</div>
</div>
</div>
<div id="cell-61" class="cell" data-execution_count="31">
<div class="sourceCode cell-code" id="cb54"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="31">
<pre><code>array([[ 0,  1,  2,  3],
       [ 4,  5,  6,  7],
       [ 8,  9, 10, 11],
       [12, 13, 14, 15]])</code></pre>
</div>
</div>
<div id="cell-62" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># entrywise multiplication, if they have the same shape</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(A<span class="op">*</span>B)</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># matrix multiplication, if they are conformable</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>A.dot(B), B.dot(A)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 0.  0.  0.  0.]
 [ 0.  5.  0.  0.]
 [ 0.  0. 10.  0.]
 [ 0.  0.  0. 15.]]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>(array([[ 0.,  1.,  2.,  3.],
        [ 4.,  5.,  6.,  7.],
        [ 8.,  9., 10., 11.],
        [12., 13., 14., 15.]]),
 array([[ 0.,  1.,  2.,  3.],
        [ 4.,  5.,  6.,  7.],
        [ 8.,  9., 10., 11.],
        [12., 13., 14., 15.]]))</code></pre>
</div>
</div>
<div id="cell-63" class="cell" data-execution_count="34">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>vv, ww <span class="op">=</span> np.array([<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>]), np.array([<span class="dv">3</span>, <span class="dv">4</span>])</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="dv">2</span><span class="op">*</span>vv <span class="op">+</span> <span class="dv">1</span>, ww</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="34">
<pre><code>(array([3, 5, 9]), array([3, 4]))</code></pre>
</div>
</div>
<div id="cell-64" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>array([1, 2, 3, 4])</code></pre>
</div>
</div>
<div id="cell-65" class="cell" data-execution_count="36">
<div class="sourceCode cell-code" id="cb63"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a>c, B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="36">
<pre><code>(array([1, 2, 3, 4]),
 array([[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11],
        [12, 13, 14, 15]]))</code></pre>
</div>
</div>
<div id="cell-66" class="cell" data-execution_count="33">
<div class="sourceCode cell-code" id="cb65"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a>c <span class="op">=</span> np.arange(<span class="dv">1</span>, <span class="dv">5</span>)</span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="33">
<pre><code>array([1, 2, 3, 4])</code></pre>
</div>
</div>
<div id="cell-67" class="cell" data-execution_count="51">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a>c, B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="51">
<pre><code>(array([1, 2, 3, 4]),
 array([[ 0,  1,  2,  3],
        [ 4,  5,  6,  7],
        [ 8,  9, 10, 11],
        [12, 13, 14, 15]]))</code></pre>
</div>
</div>
<div id="cell-68" class="cell" data-execution_count="52">
<div class="sourceCode cell-code" id="cb69"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a>c<span class="op">*</span>B</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="52">
<pre><code>array([[ 0,  2,  6, 12],
       [ 4, 10, 18, 28],
       [ 8, 18, 30, 44],
       [12, 26, 42, 60]])</code></pre>
</div>
</div>
<div id="cell-69" class="cell" data-execution_count="53">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a>c.dot(B)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="53">
<pre><code>array([ 80,  90, 100, 110])</code></pre>
</div>
</div>
<div id="cell-70" class="cell" data-execution_count="54">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a>B.dot(c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="54">
<pre><code>array([ 20,  60, 100, 140])</code></pre>
</div>
</div>
<div id="cell-71" class="cell" data-execution_count="35">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a>c[<span class="dv">3</span>], B[<span class="dv">1</span>,<span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="35">
<pre><code>(4, 5)</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="numpy.arange-vs-numpy.linspace" class="level2">
<h2 class="anchored" data-anchor-id="numpy.arange-vs-numpy.linspace"><code>numpy.arange</code> vs <code>numpy.linspace</code></h2>
<div id="cell-73" class="cell" data-execution_count="56">
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(np.arange(<span class="dv">0</span>, <span class="dv">1</span>, <span class="fl">0.1</span>))</span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a>np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[0.  0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="56">
<pre><code>array([0.        , 0.11111111, 0.22222222, 0.33333333, 0.44444444,
       0.55555556, 0.66666667, 0.77777778, 0.88888889, 1.        ])</code></pre>
</div>
</div>
</section>
<section id="probability-distributions-in-scipy.stats" class="level2">
<h2 class="anchored" data-anchor-id="probability-distributions-in-scipy.stats">Probability distributions in <code>scipy.stats</code></h2>
<ul>
<li>Distributions
<ul>
<li><code>norm</code> for normal distribution</li>
<li><code>expon</code> for exponential distribution</li>
<li><code>f</code> for <span class="math inline">\(F\)</span>-distribution</li>
<li><code>t</code> for <span class="math inline">\(t\)</span>-distribution</li>
<li><code>chi2</code> for <span class="math inline">\(\chi^2\)</span></li>
</ul></li>
<li>Methods
<ul>
<li><code>cdf</code> for cumulative distribution function</li>
<li><code>pdf</code> for probability density function</li>
<li><code>rvs</code> for random samples</li>
<li><code>ppf</code> for percentile/quantile function</li>
<li><code>sf</code> for survival function</li>
</ul></li>
</ul>
<div id="cell-75" class="cell" data-execution_count="37">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a>c</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="37">
<pre><code>array([1, 2, 3, 4])</code></pre>
</div>
</div>
<div id="cell-76" class="cell" data-execution_count="38">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a>ss.expon.ppf(<span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="38">
<pre><code>np.float64(0.0)</code></pre>
</div>
</div>
<div id="cell-77" class="cell" data-execution_count="39">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a>ss.expon.ppf(<span class="fl">0.75</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="39">
<pre><code>np.float64(1.3862943611198906)</code></pre>
</div>
</div>
<div id="cell-78" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set random seed for reproducing the same result</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="co">#np.random.seed(1414)</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a>ss.norm.rvs(size<span class="op">=</span><span class="dv">100</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>array([ 1.90500963e+00, -9.26189353e-01,  2.59899601e-02, -3.88504372e-02,
       -4.99088973e-01, -3.28268840e-01, -9.02064852e-01, -1.12596435e+00,
       -5.82834299e-01,  6.87782748e-01, -1.58545821e+00, -1.02809283e+00,
        2.23827542e-01,  1.11105370e+00, -7.62913181e-01, -9.50884319e-02,
        3.41188487e-01,  6.23140174e-01, -8.26578120e-01,  2.24530170e+00,
        1.95859043e+00, -7.95248922e-01, -4.33296750e-01, -8.46815528e-01,
        1.21972014e-01,  2.56056794e+00,  1.28634181e+00,  1.58244716e+00,
        1.53643255e+00, -9.02912788e-01, -6.81755257e-01,  1.25675463e+00,
       -3.22728800e-01, -2.23427113e-01,  9.37736522e-01,  1.84954428e-01,
       -1.47368965e+00,  5.13991467e-01, -7.38149140e-01,  1.28392808e-01,
       -2.58651738e-01, -9.77344921e-01, -1.90288421e+00,  1.98369021e-01,
        8.24466724e-01, -1.03827555e+00,  1.80616310e+00, -1.37742816e+00,
       -4.07164649e-01, -1.95352299e+00, -1.05000140e+00,  1.02700912e+00,
        5.40498556e-01, -2.82708805e-01, -2.87597562e-01, -8.41689373e-01,
        5.93505669e-02,  4.53903314e-01, -1.15212311e+00, -5.69057683e-01,
       -2.37658188e-01,  1.10694851e+00, -5.46694151e-01, -2.82575234e-01,
        1.09209917e-01, -1.66039357e-01, -2.41407120e-01,  5.78674565e-01,
       -4.78640827e-01, -1.44091328e+00, -1.26918381e+00,  1.31760542e+00,
       -9.97741445e-01, -8.34399700e-01, -7.37834400e-01,  2.59507750e+00,
       -3.45976692e-01, -8.36221569e-01,  3.00247725e-02, -9.12115482e-01,
       -5.11351475e-01, -2.22029626e-01,  3.77572064e-01, -8.23316424e-04,
        4.47546024e-01,  5.37300771e-01,  5.65936543e-03,  6.33369379e-01,
       -6.42294255e-01, -6.51539813e-01,  1.66518313e+00, -1.13719462e+00,
       -1.28257270e-01,  2.05714889e+00, -3.50942579e-01, -2.11867973e-01,
        1.81174643e+00, -1.17653604e+00, -1.23539063e+00,  9.21296346e-01])</code></pre>
</div>
</div>
<div id="cell-79" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># restructure in to a matrix</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">0</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> norm.rvs(size<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>x.reshape(<span class="dv">5</span>, <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>array([[ 1.76405235,  0.40015721],
       [ 0.97873798,  2.2408932 ],
       [ 1.86755799, -0.97727788],
       [ 0.95008842, -0.15135721],
       [-0.10321885,  0.4105985 ]])</code></pre>
</div>
</div>
<div id="cell-80" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> ss.chi2.rvs(size<span class="op">=</span><span class="dv">1000</span>, df<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>x.std()</span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="co">#x.mean(), x.std()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>np.float64(2.272882482740998)</code></pre>
</div>
</div>
<div id="cell-81" class="cell" data-execution_count="43">
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> norm.rvs(size<span class="op">=</span><span class="dv">10000</span>)</span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a>x.mean(), x.std()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="43">
<pre><code>(np.float64(-0.00694190524278084), np.float64(1.0016440451939277))</code></pre>
</div>
</div>
<div id="cell-82" class="cell" data-execution_count="40">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># t distribution</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> ss.t.rvs(size<span class="op">=</span><span class="dv">20</span>, df<span class="op">=</span><span class="dv">3</span>)</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> x.reshape(<span class="dv">5</span>, <span class="dv">4</span>)</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>x.std(axis<span class="op">=</span><span class="dv">0</span>), x.mean(axis<span class="op">=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="40">
<pre><code>(array([1.37879318, 0.90832706, 0.54941869, 1.06259522]),
 array([-0.25745669, -1.00116667,  0.49639331, -0.14980356,  0.09080126]))</code></pre>
</div>
</div>
<div id="cell-83" class="cell" data-execution_count="41">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="co"># set seed for reproducing the same result</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">3141</span>)</span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a>A <span class="op">=</span> ss.t.rvs(size<span class="op">=</span><span class="dv">50</span>, df<span class="op">=</span><span class="dv">3</span>).reshape(<span class="dv">10</span>, <span class="dv">5</span>)</span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(A)</span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a><span class="co"># columns means, row means, mean</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>A.mean(axis<span class="op">=</span><span class="dv">0</span>), A.mean(axis<span class="op">=</span><span class="dv">1</span>), A.mean(), A[<span class="dv">0</span>,:].mean(), A[:,<span class="dv">1</span>].mean()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[[ 0.38460161  0.30557167  0.98733417 -0.91383565  0.29287735]
 [-4.80767259  1.75715301  0.56930703 -0.18584678 -0.27178843]
 [-2.22506467  0.75044717  0.64565414 -6.61192184  0.52245651]
 [-3.9920851  -0.09520588 -1.13886262  0.10359085  0.98480259]
 [ 1.14992001 -0.0721649   1.11039801 -1.2657385   0.24885729]
 [ 0.83122811  1.1900472   2.20384757  0.241097    0.7355704 ]
 [ 0.35649725 -0.05568609  0.91596184  0.57625402 -1.13201945]
 [-0.33241969 -0.86425951  0.70613486  0.58578441  0.83649889]
 [-3.05161328 -0.12689271 -0.95750987  0.43748489 -0.01460354]
 [ 0.91656328  0.61010723 -1.11239471 -0.96544386 -0.38342567]]</code></pre>
</div>
<div class="cell-output cell-output-display" data-execution_count="41">
<pre><code>(array([-1.07700451,  0.33991172,  0.39298704, -0.79985755,  0.18192259]),
 array([ 0.21130983, -0.58776955, -1.38368574, -0.82755203,  0.23425438,
         1.04035806,  0.13220151,  0.18634779, -0.7426269 , -0.18691875]),
 -0.19240813934357784,
 0.21130982710311189,
 0.3399117196808371)</code></pre>
</div>
</div>
<div id="cell-84" class="cell" data-execution_count="42">
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a>A.std(axis<span class="op">=</span><span class="dv">0</span>), A.std(axis<span class="op">=</span><span class="dv">1</span>), A.std()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="42">
<pre><code>(array([2.1202166 , 0.71816393, 1.05120007, 2.04105521, 0.61667702]),
 array([0.61866546, 2.23188063, 2.8407215 , 1.72041687, 0.88883698,
        0.65598228, 0.70644573, 0.66713118, 1.23930652, 0.81904152]),
 1.5861889765952781)</code></pre>
</div>
</div>
<div id="cell-85" class="cell" data-execution_count="99">
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a>f(<span class="fl">3.14</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="99">
<pre><code>0.0015926529164868282</code></pre>
</div>
</div>
<div id="cell-86" class="cell" data-execution_count="44">
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># plot graph of a function</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="kw">lambda</span> x: np.sin(x)</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>g <span class="op">=</span> <span class="kw">lambda</span> x: np.sin(x <span class="op">-</span> np.pi<span class="op">/</span><span class="dv">6</span>)</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>h <span class="op">=</span> <span class="kw">lambda</span> x: np.sin(x <span class="op">-</span> np.pi<span class="op">/</span><span class="dv">4</span>)</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">2</span><span class="op">*</span>np.pi, <span class="dv">200</span>)</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="co"># plot</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">6</span>))</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>plt.plot(x, f(x), <span class="st">'r'</span>, lw<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">'$y = f(x)$'</span>)</span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>plt.plot(x, g(x), <span class="st">'k--'</span>, lw<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">'$y = g(x)$'</span>)</span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>plt.plot(x, h(x), <span class="st">'b-.'</span>, lw<span class="op">=</span><span class="dv">1</span>, label<span class="op">=</span><span class="st">'$y = h(x)$'</span>)</span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'$x$'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">'$y$'</span>, fontsize<span class="op">=</span><span class="dv">25</span>)</span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.ylabel('$y$', fontsize=12)</span></span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.title('Whatever the Title', fontsize=15)</span></span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a>plt.grid()</span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a><span class="co">#plt.legend();</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="NSD_Lec01-FinancialEngineering_Summer2025_files/figure-html/cell-55-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-87" class="cell" data-execution_count="46">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples for histogram</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a><span class="co"># set seed</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a>np.random.seed(<span class="dv">2718</span>)</span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a>sample <span class="op">=</span> pd.DataFrame(norm.rvs(size<span class="op">=</span><span class="bu">int</span>(<span class="fl">5e4</span>)))</span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a>sample.head(<span class="dv">10</span>), sample.tail(<span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="46">
<pre><code>(          0
 0  1.722518
 1 -0.626257
 2 -3.533687
 3  0.716898
 4  1.353317
 5  1.603105
 6  0.501179
 7  0.748855
 8 -1.790165
 9  0.533090,
               0
 49990  0.004426
 49991  0.235329
 49992 -0.188821
 49993 -0.183680
 49994  0.475978
 49995 -1.139552
 49996 -0.162364
 49997 -0.355614
 49998 -0.793454
 49999  1.334050)</code></pre>
</div>
</div>
<div id="cell-88" class="cell" data-execution_count="47">
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a>sample.describe().transpose()</span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="co">#sample.describe().transpose()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display" data-execution_count="47">
<div>


<table class="dataframe caption-top table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">count</th>
<th data-quarto-table-cell-role="th">mean</th>
<th data-quarto-table-cell-role="th">std</th>
<th data-quarto-table-cell-role="th">min</th>
<th data-quarto-table-cell-role="th">25%</th>
<th data-quarto-table-cell-role="th">50%</th>
<th data-quarto-table-cell-role="th">75%</th>
<th data-quarto-table-cell-role="th">max</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>50000.0</td>
<td>0.000345</td>
<td>1.002402</td>
<td>-4.568631</td>
<td>-0.675698</td>
<td>0.006211</td>
<td>0.681126</td>
<td>4.001952</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div id="cell-89" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co"># generate random samples from standard normal</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a>sample <span class="op">=</span> pd.DataFrame(norm.rvs(size<span class="op">=</span><span class="bu">int</span>(<span class="fl">5e4</span>))) <span class="co"># 1e5 = 10^5, 1e3 = 10^3 = 1000</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(sample.<span class="bu">min</span>(), sample.<span class="bu">max</span>(), <span class="dv">200</span>)</span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> norm.pdf(x)</span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="co"># histogram by hvplot.hist</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a><span class="co">#sample.hvplot.hist(bins=50, height=350, width=550, label='histogram') * \</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a><span class="co">#hv.Curve((x, y*8500)).opts(color='red', line_dash='dashed')</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-90" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co"># histogram by seaborn.histplot</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="co"># we shall mostly using this module for plotting histograms</span></span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">6</span>))</span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a>sns.histplot(sample[<span class="dv">0</span>], bins<span class="op">=</span><span class="dv">50</span>, stat<span class="op">=</span><span class="st">'density'</span>, kde<span class="op">=</span><span class="va">True</span>, label<span class="op">=</span><span class="st">'histogram'</span>)</span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="co">#sns.histplot(sample[0], bins=50, color='k', fill=False)</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'$X$'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Histogram'</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-10"><a href="#cb108-10" aria-hidden="true" tabindex="-1"></a><span class="co"># superimpose density of standard normal </span></span>
<span id="cb108-11"><a href="#cb108-11" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(sample.<span class="bu">min</span>(), sample.<span class="bu">max</span>(), <span class="dv">200</span>)</span>
<span id="cb108-12"><a href="#cb108-12" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> norm.pdf(x)</span>
<span id="cb108-13"><a href="#cb108-13" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y, <span class="st">'r--'</span>, label<span class="op">=</span><span class="st">'normal density'</span>)</span>
<span id="cb108-14"><a href="#cb108-14" aria-hidden="true" tabindex="-1"></a>plt.legend()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="NSD_Lec01-FinancialEngineering_Summer2025_files/figure-html/cell-59-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-91" class="cell" data-execution_count="48">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a>sample.columns <span class="op">=</span> [<span class="st">'X'</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div id="cell-92" class="cell" data-execution_count="49">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># histogram using built-in pandas.DataFrame method</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a>sample.plot(kind<span class="op">=</span><span class="st">'hist'</span>, bins<span class="op">=</span><span class="dv">50</span>, density<span class="op">=</span><span class="va">True</span>, histtype<span class="op">=</span><span class="st">'step'</span>)</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a><span class="co"># superimpose the density</span></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(sample.<span class="bu">min</span>(), sample.<span class="bu">max</span>(), <span class="dv">200</span>)</span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> norm.pdf(x)</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y, <span class="st">'r-.'</span>, label<span class="op">=</span><span class="st">'normal density'</span>)</span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'$X$'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a>plt.title(<span class="st">'Histogram'</span>, fontsize<span class="op">=</span><span class="dv">18</span>)</span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a>plt.legend()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="NSD_Lec01-FinancialEngineering_Summer2025_files/figure-html/cell-61-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>
<div id="cell-93" class="cell" data-execution_count="50">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># histogram using pyplot</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">9</span>, <span class="dv">6</span>))</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>plt.hist(sample, density<span class="op">=</span><span class="va">True</span>, bins<span class="op">=</span><span class="dv">50</span>, histtype<span class="op">=</span><span class="st">'bar'</span>, rwidth<span class="op">=</span><span class="fl">0.85</span>, label<span class="op">=</span><span class="st">'histogram'</span>)</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="co"># superimpose the density</span></span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> np.linspace(sample.<span class="bu">min</span>(), sample.<span class="bu">max</span>(), <span class="dv">200</span>)</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> norm.pdf(x)</span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>plt.plot(x, y, <span class="st">'r-.'</span>, label<span class="op">=</span><span class="st">'normal density'</span>)</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">'$X$'</span>, fontsize<span class="op">=</span><span class="dv">12</span>)</span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>plt.legend()<span class="op">;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>
<figure class="figure">
<p><img src="NSD_Lec01-FinancialEngineering_Summer2025_files/figure-html/cell-62-output-1.png" class="img-fluid figure-img"></p>
</figure>
</div>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
        const codeEl = trigger.previousElementSibling.cloneNode(true);
        for (const childEl of codeEl.children) {
          if (isCodeAnnotation(childEl)) {
            childEl.remove();
          }
        }
        return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>